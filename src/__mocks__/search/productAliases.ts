/**
 * Product/service terms mapped to organization categories
 * This system allows users to search for products and find relevant stores
 */

// Product aliases mapped to organization category types
export const productAliases = {
  // Electronics & tech products
  'electronics': [
    // Power tools
    'перфоратор', 'дрель', 'шуруповерт', 'болгарка', 'лобзик', 'циркулярка',
    'гайковерт', 'рубанок', 'торцовка', 'электролобзик', 'ударная дрель',
    
    // Consumer electronics
    'телевизор', 'ноутбук', 'компьютер', 'планшет', 'телефон', 'смартфон',
    'наушники', 'колонки', 'акустика', 'саундбар', 'камера', 'фотоаппарат',
    'видеокамера', 'электронная книга', 'ридер', 'монитор', 'клавиатура',
    'мышь', 'веб-камера', 'микрофон', 'роутер', 'модем', 'wi-fi',
    
    // Home appliances
    'холодильник', 'стиральная машина', 'посудомоечная машина', 'духовка',
    'варочная панель', 'вытяжка', 'микроволновка', 'мультиварка', 'блендер',
    'миксер', 'соковыжималка', 'кофемашина', 'чайник', 'утюг', 'пылесос',
    'кондиционер', 'обогреватель', 'увлажнитель', 'фен', 'эпилятор',
    
    // Gaming
    'playstation', 'ps5', 'ps4', 'xbox', 'nintendo', 'switch', 'геймпад',
    'джойстик', 'игровая консоль', 'видеоигра', 'игра',
    
    // Computer parts
    'видеокарта', 'процессор', 'материнская плата', 'оперативная память',
    'жесткий диск', 'ssd', 'блок питания', 'корпус', 'кулер', 'вентилятор'
  ],
  
  // Grocery items
  'grocery': [
    // Dairy products
    'молоко', 'кефир', 'ряженка', 'творог', 'сметана', 'йогурт', 'сыр',
    'масло', 'сливки', 'простокваша', 'варенец',
    
    // Meat & fish
    'мясо', 'говядина', 'свинина', 'баранина', 'курица', 'индейка',
    'колбаса', 'сосиски', 'ветчина', 'бекон', 'рыба', 'семга', 'форель',
    'скумбрия', 'селедка', 'креветки', 'кальмары', 'икра',
    
    // Bakery
    'хлеб', 'булка', 'батон', 'багет', 'лаваш', 'лепешка', 'круассан',
    'булочка', 'пирожок', 'торт', 'пирог', 'печенье', 'конфеты',
    'шоколад', 'мармелад', 'зефир', 'пастила', 'вафли',
    
    // Produce
    'овощи', 'фрукты', 'яблоки', 'бананы', 'апельсины', 'мандарины',
    'лимоны', 'груши', 'виноград', 'ягоды', 'клубника', 'малина',
    'картофель', 'морковь', 'лук', 'чеснок', 'помидоры', 'огурцы',
    'капуста', 'перец', 'баклажаны', 'кабачки', 'зелень', 'салат',
    
    // Pantry staples
    'яйца', 'сахар', 'соль', 'мука', 'крупа', 'рис', 'гречка', 'овсянка',
    'макароны', 'спагетти', 'лапша', 'консервы', 'тушенка', 'паста',
    'соус', 'кетчуп', 'майонез', 'горчица', 'уксус', 'специи',
    
    // Beverages
    'вода', 'сок', 'газировка', 'лимонад', 'квас', 'пиво', 'вино',
    'чай', 'кофе', 'какао', 'молочный коктейль', 'энергетик'
  ],
  
  // Medical services & products
  'medical': [
    // Medical professionals
    'врач', 'доктор', 'терапевт', 'хирург', 'кардиолог', 'невролог',
    'окулист', 'офтальмолог', 'лор', 'отоларинголог', 'дерматолог',
    'гинеколог', 'уролог', 'эндокринолог', 'гастроэнтеролог', 'ортопед',
    'травматолог', 'онколог', 'психиатр', 'нарколог', 'венеролог',
    'педиатр', 'детский врач', 'стоматолог', 'зубной врач',
    
    // Medical procedures
    'анализы', 'анализ крови', 'анализ мочи', 'узи', 'рентген', 'мрт',
    'кт', 'томография', 'флюорография', 'кардиограмма', 'экг',
    'эндоскопия', 'гастроскопия', 'колоноскопия', 'биопсия',
    'прививка', 'вакцинация', 'вакцина', 'иммунизация',
    
    // Medical services
    'справка', 'медсправка', 'больничный', 'осмотр', 'консультация',
    'диагностика', 'обследование', 'диспансеризация', 'чекап',
    'медосмотр', 'профосмотр', 'водительская справка', 'справка в бассейн'
  ],
  
  // Pharmacy items
  'pharmacy': [
    // Medications
    'лекарство', 'таблетки', 'пилюли', 'капсулы', 'антибиотик',
    'жаропонижающее', 'обезболивающее', 'противовирусное',
    'антигистаминное', 'сердечные препараты', 'от давления',
    'от простуды', 'от кашля', 'от горла', 'от насморка',
    'капли в нос', 'спрей', 'сироп', 'мазь', 'крем', 'гель',
    
    // Vitamins & supplements
    'витамины', 'витамин d', 'витамин c', 'кальций', 'магний',
    'омега-3', 'пробиотики', 'железо', 'бад', 'добавки',
    'минералы', 'поливитамины', 'иммуномодуляторы',
    
    // Medical supplies
    'бинт', 'пластырь', 'вата', 'марля', 'йод', 'зеленка',
    'перекись водорода', 'спирт', 'градусник', 'термометр',
    'тонометр', 'глюкометр', 'ингалятор', 'небулайзер',
    'шприц', 'катетер', 'презервативы', 'тест на беременность'
  ],
  
  // Auto services & products
  'auto': [
    // Auto services
    'шиномонтаж', 'балансировка', 'развал-схождение', 'диагностика',
    'ремонт двигателя', 'ремонт тормозов', 'ремонт подвески',
    'замена масла', 'техосмотр', 'мойка', 'детейлинг', 'полировка',
    'химчистка салона', 'тонировка', 'сигнализация', 'автозвук',
    
    // Auto parts
    'масло моторное', 'трансмиссионное масло', 'антифриз', 'тосол',
    'тормозная жидкость', 'стеклоомывайка', 'аккумулятор', 'батарея',
    'генератор', 'стартер', 'свечи зажигания', 'фильтр', 'воздушный фильтр',
    'масляный фильтр', 'топливный фильтр', 'салонный фильтр',
    
    // Tires & wheels
    'шины', 'резина', 'покрышки', 'колеса', 'диски', 'летняя резина',
    'зимняя резина', 'всесезонка', 'камеры', 'ниппели',
    
    // Car parts
    'тормозные колодки', 'тормозные диски', 'амортизаторы', 'стойки',
    'пружины', 'сайлентблоки', 'шаровые опоры', 'рулевые наконечники',
    'ремень ГРМ', 'цепь ГРМ', 'помпа', 'термостат', 'радиатор',
    'глушитель', 'катализатор', 'лампочки', 'предохранители'
  ],
  
  // Beauty services & products
  'beauty': [
    // Hair services
    'стрижка', 'мужская стрижка', 'женская стрижка', 'детская стрижка',
    'окрашивание', 'покраска волос', 'мелирование', 'колорирование',
    'омбре', 'балаяж', 'тонирование', 'осветление', 'химическая завивка',
    'выпрямление волос', 'кератиновое выпрямление', 'ботокс для волос',
    'ламинирование волос', 'наращивание волос', 'укладка', 'прическа',
    'плетение кос', 'локоны', 'начес', 'мытье головы',
    
    // Nail services
    'маникюр', 'педикюр', 'наращивание ногтей', 'гель-лак', 'шеллак',
    'френч', 'дизайн ногтей', 'покрытие ногтей', 'снятие гель-лака',
    'обрезной маникюр', 'аппаратный маникюр', 'европейский маникюр',
    'spa-маникюр', 'spa-педикюр', 'парафинотерапия',
    
    // Facial services
    'косметолог', 'чистка лица', 'пилинг', 'маска для лица',
    'увлажнение', 'anti-age', 'мезотерапия', 'биоревитализация',
    'контурная пластика', 'филлеры', 'ботокс', 'массаж лица',
    'лимфодренаж', 'rf-лифтинг', 'фототерапия', 'лазерная шлифовка',
    
    // Body services
    'массаж', 'расслабляющий массаж', 'лечебный массаж', 'антицеллюлитный массаж',
    'лимфодренажный массаж', 'спортивный массаж', 'тайский массаж',
    'эпиляция', 'депиляция', 'лазерная эпиляция', 'шугаринг', 'воск',
    'обертывание', 'скрабирование', 'солярий', 'автозагар',
    'коррекция фигуры', 'lpg массаж', 'кавитация', 'криолиполиз',
    
    // Eyebrow & lash services
    'брови', 'коррекция бровей', 'окрашивание бровей', 'ламинирование бровей',
    'архитектура бровей', 'микроблейдинг', 'пудровые брови', 'татуаж бровей',
    'ресницы', 'наращивание ресниц', 'ламинирование ресниц', 'окрашивание ресниц',
    'завивка ресниц', 'ботокс ресниц', 'снятие ресниц'
  ],
  
  // Food services (restaurants, cafes)
  'food': [
    // Cuisine types
    'пицца', 'суши', 'роллы', 'бургер', 'гамбургер', 'шаурма', 'шаверма',
    'кебаб', 'донер', 'хачапури', 'хинкали', 'пельмени', 'вареники',
    'борщ', 'солянка', 'рассольник', 'окрошка', 'салат', 'закуска',
    'горячее', 'первое', 'второе', 'десерт', 'мороженое', 'торт на заказ',
    
    // Meal types
    'завтрак', 'обед', 'ужин', 'бизнес-ланч', 'комплексный обед',
    'быстрый перекус', 'еда на вынос', 'доставка еды', 'фастфуд',
    
    // Beverages
    'кофе', 'латте', 'капучино', 'эспрессо', 'американо', 'чай',
    'смузи', 'фреш', 'коктейль', 'молочный коктейль', 'лимонад',
    'квас', 'морс', 'компот'
  ]
};

// Reverse index for fast lookup - maps products to categories
export const buildProductIndex = (): Map<string, string[]> => {
  const index = new Map<string, string[]>();
  
  Object.entries(productAliases).forEach(([category, products]) => {
    products.forEach(product => {
      const key = product.toLowerCase();
      if (!index.has(key)) {
        index.set(key, []);
      }
      index.get(key)!.push(category);
    });
  });
  
  return index;
};

// Category mappings to organization category names
export const categoryToOrganizationMap: Record<string, string[]> = {
  'electronics': [
    'Магазин цифровой техники',
    'Магазин бытовой техники',
    'Компьютерный магазин'
  ],
  'grocery': [
    'Продуктовый магазин',
    'Продуктовый магазин здорового питания',
    'Супермаркет'
  ],
  'medical': [
    'Медицинская лаборатория',
    'Многопрофильная клиника',
    'Стоматологическая клиника'
  ],
  'pharmacy': [
    'Аптека'
  ],
  'auto': [
    'Автосервис',
    'Шиномонтаж',
    'Автомойка'
  ],
  'beauty': [
    'Салон красоты',
    'Массажный салон'
  ],
  'food': [
    'Ресторан европейской кухни',
    'Пиццерия',
    'Кофейня',
    'Кафе'
  ]
};

// Human-readable category names
export const categoryDisplayNames: Record<string, string> = {
  'electronics': 'Электроника и техника',
  'grocery': 'Продуктовые магазины',
  'medical': 'Медицинские услуги',
  'pharmacy': 'Аптеки',
  'auto': 'Автосервисы',
  'beauty': 'Красота и здоровье',
  'food': 'Рестораны и кафе'
};

// Get matching categories for a query
export const getMatchingCategories = (query: string): string[] => {
  const lowerQuery = query.toLowerCase();
  const productIndex = buildProductIndex();
  const matchedCategories: string[] = [];
  
  // Check for exact product matches
  if (productIndex.has(lowerQuery)) {
    matchedCategories.push(...productIndex.get(lowerQuery)!);
  }
  
  // Check for partial matches
  for (const [product, categories] of productIndex.entries()) {
    if (product.includes(lowerQuery) && lowerQuery.length >= 3) {
      matchedCategories.push(...categories);
    }
  }
  
  // Remove duplicates
  return [...new Set(matchedCategories)];
};

// Get organization categories that match product categories
export const getOrganizationCategories = (productCategories: string[]): string[] => {
  const orgCategories: string[] = [];
  
  productCategories.forEach(productCategory => {
    const mappedCategories = categoryToOrganizationMap[productCategory];
    if (mappedCategories) {
      orgCategories.push(...mappedCategories);
    }
  });
  
  return [...new Set(orgCategories)];
};